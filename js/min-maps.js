/*! For license information please see maps.js.LICENSE.txt */
(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},63:t=>{"use strict";t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(o=n;0!=o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var s=i[o];if(!t(e[s],r[s]))return!1}return!0}return e!=e&&r!=r}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),s=new I(n||[]);return i._invoke=function(t,e,r){var n=h;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=L(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var l=u(t,e,r);if("normal"===l.type){if(n=r.done?m:p,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=m,r.method="throw",r.arg=l.arg)}}}(t,r,s),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",d={};function g(){}function y(){}function v(){}var w={};l(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(P([])));k&&k!==r&&n.call(k,i)&&(w=k);var b=v.prototype=g.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function r(o,i,s,a){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,a)}))}a(l.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function L(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function P(t){if(t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:O}}function O(){return{value:e,done:!0}}return y.prototype=v,l(b,"constructor",v),l(v,"constructor",y),y.displayName=l(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new M(c(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(b),l(b,a,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(757),e=r.n(t),n=r(63),o=r.n(n);function i(t,e,r,n,o,a){if(o-n<=r)return;const l=n+o>>1;s(t,e,l,n,o,a%2),i(t,e,r,n,l-1,a+1),i(t,e,r,l+1,o,a+1)}function s(t,e,r,n,o,i){for(;o>n;){if(o-n>600){const a=o-n+1,l=r-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);s(t,e,r,Math.max(n,Math.floor(r-l*u/a+h)),Math.min(o,Math.floor(r+(a-l)*u/a+h)),i)}const l=e[2*r+i];let c=n,u=o;for(a(t,e,n,r),e[2*o+i]>l&&a(t,e,n,o);c<u;){for(a(t,e,c,u),c++,u--;e[2*c+i]<l;)c++;for(;e[2*u+i]>l;)u--}e[2*n+i]===l?a(t,e,n,u):(u++,a(t,e,u,o)),u<=r&&(n=u+1),r<=u&&(o=u-1)}}function a(t,e,r,n){l(t,r,n),l(e,2*r,2*n),l(e,2*r+1,2*n+1)}function l(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function c(t,e,r,n){const o=t-r,i=e-n;return o*o+i*i}const u=t=>t[0],h=t=>t[1];class p{constructor(t,e=u,r=h,n=64,o=Float64Array){this.nodeSize=n,this.points=t;const s=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new s(t.length),l=this.coords=new o(2*t.length);for(let n=0;n<t.length;n++)a[n]=n,l[2*n]=e(t[n]),l[2*n+1]=r(t[n]);i(a,l,n,0,a.length-1,0)}range(t,e,r,n){return function(t,e,r,n,o,i,s){const a=[0,t.length-1,0],l=[];let c,u;for(;a.length;){const h=a.pop(),p=a.pop(),f=a.pop();if(p-f<=s){for(let s=f;s<=p;s++)c=e[2*s],u=e[2*s+1],c>=r&&c<=o&&u>=n&&u<=i&&l.push(t[s]);continue}const m=Math.floor((f+p)/2);c=e[2*m],u=e[2*m+1],c>=r&&c<=o&&u>=n&&u<=i&&l.push(t[m]);const d=(h+1)%2;(0===h?r<=c:n<=u)&&(a.push(f),a.push(m-1),a.push(d)),(0===h?o>=c:i>=u)&&(a.push(m+1),a.push(p),a.push(d))}return l}(this.ids,this.coords,t,e,r,n,this.nodeSize)}within(t,e,r){return function(t,e,r,n,o,i){const s=[0,t.length-1,0],a=[],l=o*o;for(;s.length;){const u=s.pop(),h=s.pop(),p=s.pop();if(h-p<=i){for(let o=p;o<=h;o++)c(e[2*o],e[2*o+1],r,n)<=l&&a.push(t[o]);continue}const f=Math.floor((p+h)/2),m=e[2*f],d=e[2*f+1];c(m,d,r,n)<=l&&a.push(t[f]);const g=(u+1)%2;(0===u?r-o<=m:n-o<=d)&&(s.push(p),s.push(f-1),s.push(g)),(0===u?r+o>=m:n+o>=d)&&(s.push(f+1),s.push(h),s.push(g))}return a}(this.ids,this.coords,t,e,r,this.nodeSize)}}const f={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},m=Math.fround||(d=new Float32Array(1),t=>(d[0]=+t,d[0]));var d;class g{constructor(t){this.options=M(Object.create(f),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:r,maxZoom:n,nodeSize:o}=this.options;e&&console.time("total time");const i=`prepare ${t.length} points`;e&&console.time(i),this.points=t;let s=[];for(let e=0;e<t.length;e++)t[e].geometry&&s.push(v(t[e],e));this.trees[n+1]=new p(s,L,T,o,Float32Array),e&&console.timeEnd(i);for(let t=n;t>=r;t--){const r=+Date.now();s=this._cluster(s,t),this.trees[t]=new p(s,L,T,o,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,s.length,+Date.now()-r)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let r=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let o=180===t[2]?180:((t[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,o=180;else if(r>o){const t=this.getClusters([r,n,180,i],e),s=this.getClusters([-180,n,o,i],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(k(r),b(i),k(o),b(n)),l=[];for(const t of a){const e=s.points[t];l.push(e.numPoints?w(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),r=this._getOriginZoom(t),n="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(n);const i=o.points[e];if(!i)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=o.within(i.x,i.y,s),l=[];for(const e of a){const r=o.points[e];r.parentId===t&&l.push(r.numPoints?w(r):this.points[r.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,r){e=e||10,r=r||0;const n=[];return this._appendLeaves(n,t,e,r,0),n}getTile(t,e,r){const n=this.trees[this._limitZoom(t)],o=Math.pow(2,t),{extent:i,radius:s}=this.options,a=s/i,l=(r-a)/o,c=(r+1+a)/o,u={features:[]};return this._addTileFeatures(n.range((e-a)/o,l,(e+1+a)/o,c),n.points,e,r,o,u),0===e&&this._addTileFeatures(n.range(1-a/o,l,1,c),n.points,o,r,o,u),e===o-1&&this._addTileFeatures(n.range(0,l,a/o,c),n.points,-1,r,o,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e}_appendLeaves(t,e,r,n,o){const i=this.getChildren(e);for(const e of i){const i=e.properties;if(i&&i.cluster?o+i.point_count<=n?o+=i.point_count:o=this._appendLeaves(t,i.cluster_id,r,n,o):o<n?o++:t.push(e),t.length===r)break}return o}_addTileFeatures(t,e,r,n,o,i){for(const s of t){const t=e[s],a=t.numPoints;let l,c,u;if(a)l=x(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=k(e.geometry.coordinates[0]),u=b(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*o-r)),Math.round(this.options.extent*(u*o-n))]],tags:l};let p;a?p=t.id:this.options.generateId?p=t.index:this.points[t.index].id&&(p=this.points[t.index].id),void 0!==p&&(h.id=p),i.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const r=[],{radius:n,extent:o,reduce:i,minPoints:s}=this.options,a=n/(o*Math.pow(2,e));for(let n=0;n<t.length;n++){const o=t[n];if(o.zoom<=e)continue;o.zoom=e;const l=this.trees[e+1],c=l.within(o.x,o.y,a),u=o.numPoints||1;let h=u;for(const t of c){const r=l.points[t];r.zoom>e&&(h+=r.numPoints||1)}if(h>u&&h>=s){let t=o.x*u,s=o.y*u,a=i&&u>1?this._map(o,!0):null;const p=(n<<5)+(e+1)+this.points.length;for(const r of c){const n=l.points[r];if(n.zoom<=e)continue;n.zoom=e;const c=n.numPoints||1;t+=n.x*c,s+=n.y*c,n.parentId=p,i&&(a||(a=this._map(o,!0)),i(a,this._map(n)))}o.parentId=p,r.push(y(t/h,s/h,p,h,a))}else if(r.push(o),h>1)for(const t of c){const n=l.points[t];n.zoom<=e||(n.zoom=e,r.push(n))}}return r}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?M({},t.properties):t.properties;const r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?M({},n):n}}function y(t,e,r,n,o){return{x:m(t),y:m(e),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:o}}function v(t,e){const[r,n]=t.geometry.coordinates;return{x:m(k(r)),y:m(b(n)),zoom:1/0,index:e,parentId:-1}}function w(t){return{type:"Feature",id:t.id,properties:x(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),_(t.y)]}};var e}function x(t){const e=t.numPoints,r=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return M(M({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function k(t){return t/360+.5}function b(t){const e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function _(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function M(t,e){for(const r in e)t[r]=e[r];return t}function L(t){return t.x}function T(t){return t.y}function E(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}class I{constructor({markers:t,position:e}){this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(0!==this.markers.length||this._position)return this.markers.reduce(((t,e)=>t.extend(e.getPosition())),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((t=>t.getVisible())).length}push(t){this.markers.push(t)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class P{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return O(t)}}const O=t=>t.map((t=>new I({position:t.getPosition(),markers:[t]})));class S extends P{constructor(t){var{maxZoom:e,radius:r=60}=t,n=E(t,["maxZoom","radius"]);super({maxZoom:e}),this.superCluster=new g(Object.assign({maxZoom:this.maxZoom,radius:r},n)),this.state={zoom:null}}calculate(t){let e=!1;if(!o()(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const r=this.markers.map((t=>({type:"Feature",geometry:{type:"Point",coordinates:[t.getPosition().lng(),t.getPosition().lat()]},properties:{marker:t}})));this.superCluster.load(r)}const r={zoom:t.map.getZoom()};return e||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(e=e||!o()(this.state,r)),this.state=r,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[t,e]},properties:r}){if(r.cluster)return new I({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((t=>t.properties.marker)),position:new google.maps.LatLng({lat:e,lng:t})});{const t=r.marker;return new I({markers:[t],position:t.getPosition()})}}}class C{constructor(t,e){this.markers={sum:t.length};const r=e.map((t=>t.count)),n=r.reduce(((t,e)=>t+e),0);this.clusters={count:e.length,markers:{mean:n/e.length,sum:n,min:Math.min(...r),max:Math.max(...r)}}}}class j{render({count:t,position:e},r){const n=t>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa(`\n  <svg fill="${n}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>`);return new google.maps.Marker({position:e,icon:{url:`data:image/svg+xml;base64,${o}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(t),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${t} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+t})}}class Z{constructor(){!function(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}(Z,google.maps.OverlayView)}}var z;!function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"}(z||(z={}));const R=(t,e,r)=>{r.fitBounds(e.bounds)};class N extends Z{constructor({map:t,markers:e=[],algorithm:r=new S({}),renderer:n=new j,onClusterClick:o=R}){super(),this.markers=[...e],this.clusters=[],this.algorithm=r,this.renderer=n,this.onClusterClick=o,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach((t=>{this.addMarker(t,!0)})),e||this.render()}removeMarker(t,e){const r=this.markers.indexOf(t);return-1!==r&&(t.setMap(null),this.markers.splice(r,1),e||this.render(),!0)}removeMarkers(t,e){let r=!1;return t.forEach((t=>{r=this.removeMarker(t,!0)||r})),r&&!e&&this.render(),r}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,z.CLUSTERING_BEGIN,this);const{clusters:e,changed:r}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});(r||null==r)&&(this.reset(),this.clusters=e,this.renderClusters()),google.maps.event.trigger(this,z.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((t=>t.setMap(null))),this.clusters.forEach((t=>t.delete())),this.clusters=[]}renderClusters(){const t=new C(this.markers,this.clusters),e=this.getMap();this.clusters.forEach((r=>{1===r.markers.length?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,t),this.onClusterClick&&r.marker.addListener("click",(t=>{google.maps.event.trigger(this,z.CLUSTER_CLICK,r),this.onClusterClick(t,r,e)}))),r.marker.setMap(e)}))}}function A(t,e,r,n,o,i,s){try{var a=t[i](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){A(i,n,o,s,a,"next",t)}function a(t){A(i,n,o,s,a,"throw",t)}s(void 0)}))}}var G;!function(t){var r=window.google?window.google:null,n=document.querySelector('[data-mg-map-role = "resetMap"]'),o=document.querySelector(".loadingText");function i(r,i,l){var c=r.getPlace();if(c&&c.geometry){var u={lat:c.geometry.location.lat(),lng:c.geometry.location.lng()},h=i.markers.reduce((function(t,e,r,n){return e&&e.position&&t.push({lat:e.position.lat(),lng:e.position.lng()}),t}),[]);i.markers.length===h.length&&h.length&&function(t,r,n){return new Promise((function(o,i){for(var s=[],a=Math.ceil(t.length/25),l=function(e,r){s[e]=[],t.slice(r,r+25).forEach((function(t){s[e].push(t)}))},c=0,u=0;c<a;c++,u+=25)l(c,u);function h(t,r){var o=r.lat,i=r.lng,s=new window.google.maps.DistanceMatrixService,a=[];return new Promise(function(){var r=F(e().mark((function r(n,o){var i,s,c;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=function(t,r,n){return new Promise((function(o,i){return setTimeout(F(e().mark((function s(){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t[r],r);case 2:if("OVER_QUERY_LIMIT"!=(a=e.sent).distanceMatrixStatus){e.next=8;break}return n=void 0,e.abrupt("return",i("STILL OVER"));case 8:return n=a,e.abrupt("return",o(n));case 10:case"end":return e.stop()}}),s)}))),2e3)}))},i=0;case 2:if(!(i<t.length)){r.next=24;break}return c=void 0,r.next=6,l(t[i],i);case 6:if("OVER_QUERY_LIMIT"!=(c=r.sent).distanceMatrixStatus){r.next=19;break}case 8:if(c.distanceMatrixResponse){r.next=19;break}return r.prev=9,r.next=12,s(t,i,c);case 12:c=r.sent,r.next=17;break;case 15:r.prev=15,r.t0=r.catch(9);case 17:r.next=8;break;case 19:a.push(c),i++,a.length===t.length&&n(a),r.next=2;break;case 24:case"end":return r.stop()}}),r,null,[[9,15]])})));return function(t,e){return r.apply(this,arguments)}}());function l(t,e){return new Promise((function(r,a){function l(){s.getDistanceMatrix({origins:[{lat:o,lng:i}],destinations:t,travelMode:n?n.toUpperCase():"DRIVING",unitSystem:window.google.maps.UnitSystem.IMPERIAL},(function(t,n){r({distanceMatrixResponse:t,destSetIdx:e,distanceMatrixStatus:n})}))}l()}))}}h(s,r).then((function(t){t.sort((function(t,e){return t.destSetIdx<e.destSetIdx?-1:t.destSetIdx>e.destSetIdx?1:0})),t=t.reduce((function(t,e,r,n){var o,i;return t.concat(null===(o=e.distanceMatrixResponse)||void 0===o||null===(i=o.rows[0])||void 0===i?void 0:i.elements)}),[]),o(t)}))}))}(h,u).then((function(e){o.style.display="none";var r=[];i.markers.forEach((function(t,n,o){e[n]&&e[n].distance&&e[n].distance.value<80467?r.push(t):t.setMap(null)}));new N({map:i,markers:r,renderer:a()});s(i,!0,r);var c=t('[data-mg-map-listings-uid="'+l+'"]').first();if(c.length){var u=r.reduce((function(t,e,r){return t+='<div class="mg_map_listings__listing">',t+=e.html,t+="</div>"}),"");u?c.html(u):(n.style.display="block",c.html("We are sorry there are no results for that search"))}}))}}function s(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0,i=new r.maps.LatLngBounds,s=0,a=o||e.markers;if(t.each(a,(function(t,e){if(!n||null!==e.mapRef){var o=new r.maps.LatLng(e.position.lat(),e.position.lng());i.extend(o),s++}})),0==s){var l,c,u=G.getPlace();u&&u.geometry&&(l=u.geometry.location.lat(),c=u.geometry.location.lng());var h=new r.maps.LatLng(l,c);return i.extend(h),e.setCenter(i.getCenter()),void e.setZoom(16)}1==s?(e.setCenter(i.getCenter()),e.setZoom(12)):e.fitBounds(i)}function a(){return{render:function(t){var e=t.count,n=t.position;return new r.maps.Marker({label:{text:String(e),color:"#723429",fontSize:"14px"},position:n,icon:"".concat(window.directoryPath,"/images/cookieIcon.png"),zIndex:Number(r.maps.Marker.MAX_ZINDEX)+e})}}}null!==r&&(t(document).ready((function(){window.madgInitMaps()})),window.madgInitMaps=function(){t("[data-mg-map-uid]").each((function(){var e=t(this).data("mg-map-uid"),l=function(e,n){var o=e.find("[data-mg-map-marker]"),i=!0===e.data("mg-open-infowindows"),l={zoom:16,center:new r.maps.LatLng(0,0),mapTypeId:r.maps.MapTypeId.ROADMAP,styles:[{featureType:"all",elementType:"geometry.fill",stylers:[{weight:"2.00"},{color:"#fafbee"}]},{featureType:"all",elementType:"geometry.stroke",stylers:[{color:"#9c9c9c"}]},{featureType:"all",elementType:"labels.text",stylers:[{visibility:"on"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#723429"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#fafbeb"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{color:"#723429"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#7b7b7b"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ebbfaf"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b5dbd2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#070707"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]}]},c=new r.maps.Map(e[0],l);window[n]=c,c.markers=[],o.each((function(e){!function(t,e,n,o){var i=new r.maps.LatLng(t.attr("data-lat"),t.attr("data-lng")),s=new r.maps.Marker({position:i,mapRef:e,html:t.html(),icon:"".concat(window.directoryPath,"/images/cookieIcon.png")});if(window[o]=s,window[o+"_content"]="",e.markers.push(s),t.html()){window[o+"_content"]=t.html();var a=new r.maps.InfoWindow({content:t.html()});n&&a.open(e,s),r.maps.event.addListener(s,"click",(function(){a.open(e,s)}))}if(t.data("kml"))new r.maps.KmlLayer({url:t.data("kml"),map:e})}(t(this),c,i,n+"_marker_"+e)}));var u=c.markers;new N({map:c,markers:u,renderer:a()});return s(c),c}(t(this),"mg_"+e);window["mg_"+t(this).data("mg-map-uid")]=l,n.addEventListener("click",(function(){var r=l.markers;new N({map:l,markers:r,renderer:a()});!function(e,r){var n=t('[data-mg-map-listings-uid="'+r+'"]').first();if(!n.length)return;var o=e.markers.reduce((function(t,e,r){return e.getMap()?(t+='<div class="mg_map_listings__listing">',t+=e.html,t+="</div>"):t}),"");o?n.html(o):n.html("We are sorry there are no results for that search")}(l,e),s(l),n.style.display="none"}));var c=t('[data-mg-map-controls-uid="'+e+'"]').first();if(c.length){var u=c.find("form").first(),h=c.find('[name="map_search"]').get(0);(G=new r.maps.places.Autocomplete(h,{types:["geocode"],fields:["geometry.location"]})).addListener("place_changed",(function(){i(G,l,e),o.style.display="block"})),u.submit((function(t){t.preventDefault(),i(G,l,e)}))}}))})}(jQuery)})()})();